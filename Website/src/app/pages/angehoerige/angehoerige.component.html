<!-- src/app/pages/angehoerige/angehoerige.component.html -->
<div class="angehoerige-page">

  <!-- Contact Form Overlay -->
  <div *ngIf="showContactForm" class="contact-overlay">
    <div class="contact-modal">
      <div class="contact-header">
        <h3>Unterstützung anfragen</h3>
        <button (click)="closeContactForm()" class="close-btn" type="button" aria-label="Close">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <form (ngSubmit)="submitContactForm()" class="contact-form form-section-group">
        <div class="form-group">
          <label for="contact-email">
            <mat-icon class="label-icon">email</mat-icon>
            E-Mail-Adresse
            <span class="required">*</span>
          </label>
          <input type="email"
                 id="contact-email"
                 [(ngModel)]="contactForm.email"
                 name="email"
                 required
                 placeholder="ihre@email.at"
                 class="form-input">
        </div>
        <div class="form-group">
          <label for="contact-message">
            <mat-icon class="label-icon">message</mat-icon>
            Ihre Situation / Fragen
          </label>
          <textarea id="contact-message"
                    [(ngModel)]="contactForm.message"
                    name="message"
                    rows="4"
                    placeholder="Beschreiben Sie gerne Ihre Situation oder stellen Sie konkrete Fragen..."
                    class="form-input"></textarea>
        </div>
        <div class="form-actions">
          <button type="button" (click)="closeContactForm()" class="btn-secondary">
            Abbrechen
          </button>
          <button type="submit"
                  class="btn-primary"
                  [disabled]="isSubmittingContact || !contactForm.email.trim()">
            <mat-icon *ngIf="!isSubmittingContact">send</mat-icon>
            {{ isSubmittingContact ? 'Wird gesendet...' : 'Nachricht senden' }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <h1>Für Angehörige</h1>
      <p>Als Partner*in, Freund*in oder Familienmitglied eines Menschen mit ADHS spielst Du eine wichtige Rolle. Hier findest Du Informationen, wie Du sinnvoll unterstützen kannst und dabei auch auf Dich selbst achtest.</p>

      <!-- Quick Navigation -->
      <div class="quick-nav">
        <button (click)="scrollToSection('support-tips')" class="nav-btn">
          Unterstützungs-Tipps
        </button>
        <button (click)="scrollToSection('challenges')" class="nav-btn">
          Herausforderungen
        </button>
        <button (click)="scrollToSection('resources')" class="nav-btn">
          Ressourcen
        </button>
        <button (click)="scrollToSection('partner-meeting')" class="nav-btn">
          Partner-Treffen
        </button>
      </div>
    </div>
  </section>

  <!-- Understanding ADHS Section -->
  <section class="understanding-section">
    <div class="container">
      <h2>ADHS verstehen</h2>
      <div class="understanding-grid">
        <div class="understanding-item">
          <h3>Neurologische Besonderheit</h3>
          <p>ADHS ist eine neurobiologische Besonderheit, nicht fehlende Willenskraft oder Disziplin.</p>
        </div>
        <div class="understanding-item">
          <h3>Individuelle Ausprägungen</h3>
          <p>Jeder Mensch mit ADHS ist anders. Symptome und Stärken variieren stark.</p>
        </div>
        <div class="understanding-item">
          <h3>Stärken und Herausforderungen</h3>
          <p>ADHS bringt sowohl Herausforderungen als auch besondere Stärken mit sich.</p>
        </div>
        <div class="understanding-item">
          <h3>Schwankende Tage</h3>
          <p>Gute und schlechte Tage wechseln sich ab - das ist völlig normal.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Support Tips Section -->
  <section id="support-tips" class="support-tips-section">
    <div class="container">
      <h2>Unterstützungs-Tipps</h2>

      <!-- Filter -->
      <div class="tips-filter">
        <label for="tip-category">Kategorie:</label>
        <select id="tip-category"
                [(ngModel)]="selectedTipCategory"
                (ngModelChange)="onTipCategoryChange()">
          <option *ngFor="let category of tipCategories" [value]="category.value">
            {{ category.label }}
          </option>
        </select>
      </div>

      <!-- Tips Grid -->
      <div class="tips-grid">
        <div *ngFor="let tip of supportTips" class="tip-card">
          <div class="tip-header" (click)="toggleTipExpansion(tip.id)">
            <!--<div class="tip-icon">{{ tip.icon }}</div>-->
            <div class="tip-title-area">
              <h3>{{ tip.title }}</h3>
              <p class="tip-description">{{ tip.description }}</p>
            </div>
            <div class="expand-icon">
              {{ isTipExpanded(tip.id) ? '−' : '+' }}
            </div>
          </div>

          <div *ngIf="isTipExpanded(tip.id)" class="tip-details">
            <h4>Konkrete Tipps:</h4>
            <ul>
              <li *ngFor="let detailTip of tip.detailedTips">{{ detailTip }}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Challenges and Solutions -->
  <section id="challenges" class="challenges-section">
    <div class="container">
      <h2>Häufige Herausforderungen & Lösungsansätze</h2>
      <div class="challenges-grid">
        <div *ngFor="let item of challengesAndSolutions" class="challenge-card">
          <div class="challenge-problem">
            <h4>Herausforderung:</h4>
            <p>{{ item.challenge }}</p>
          </div>
          <div class="challenge-solution">
            <h4>Lösungsansatz:</h4>
            <p>{{ item.solution }}</p>
            <div *ngIf="item.additionalTips" class="additional-tips">
              <strong>Zusätzliche Tipps:</strong>
              <ul>
                <li *ngFor="let tip of item.additionalTips">{{ tip }}</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Partner Meeting Section -->
  <section id="partner-meeting" class="partner-meeting-section">
    <div class="container">
      <div class="meeting-card">
        <div class="meeting-content">
          <h2>Partner-Treffen für Angehörige</h2>
          <p>Wir bieten spezielle Online-Treffen für Partner*innen und Angehörige von erwachsenen ADHS-Betroffenen an.</p>

          <div class="meeting-details">
            <div class="detail-item">
              <strong>Wann:</strong> Jeden letzten Dienstag im Monat um 19:00 Uhr (alle zwei Monate)
            </div>
            <div class="detail-item">
              <strong>Wo:</strong> Online via Zoom
            </div>
            <div class="detail-item">
              <strong>Moderation:</strong> Mag. Michaela Hartl
            </div>
            <div class="detail-item">
              <strong>Inhalt:</strong> Erfahrungsaustausch, gegenseitige Unterstützung, praktische Tipps
            </div>
          </div>

          <div class="meeting-benefits">
            <h4>Was bringt Dir das Partner-Treffen?</h4>
            <ul>
              <li>Austausch mit anderen Angehörigen</li>
              <li>Praktische Tipps für den Alltag</li>
              <li>Emotionale Unterstützung</li>
              <li>Professionelle Moderation</li>
              <li>Vertraulicher, sicherer Rahmen</li>
            </ul>
          </div>

          <div class="meeting-actions">
            <a routerLink="/termine" class="btn-primary">
              Nächste Termine ansehen
            </a>
            <a href="mailto:kontakt@team-adhs.at?subject=Partner-Treffen" class="btn-secondary">
              Mehr Infos per E-Mail
            </a>
          </div>
        </div>

        <div class="meeting-visual">
          <p class="meeting-quote">"Der Austausch mit anderen Angehörigen hat mir sehr geholfen, mich weniger allein zu fühlen."</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Resources Section -->
  <section id="resources" class="resources-section">
    <div class="container">
      <h2>Hilfreiche Ressourcen</h2>

      <!-- Resource Filter -->
      <div class="resources-filter">
        <label for="resource-type">Typ:</label>
        <select id="resource-type"
                [(ngModel)]="selectedResourceType"
                (ngModelChange)="onResourceTypeChange()">
          <option *ngFor="let type of resourceTypes" [value]="type.value">
            {{ type.label }}
          </option>
        </select>
      </div>

      <!-- Resources Grid -->
      <div class="resources-grid">
        <div *ngFor="let resource of relativeResources" class="resource-card">
          <div class="resource-header">
        <!--    <div class="resource-icon">{{ getResourceTypeIcon(resource.type) }}</div>-->
            <div class="resource-type-badge">{{ getResourceTypeLabel(resource.type) }}</div>
          </div>

          <div class="resource-content">
            <h3>{{ resource.title }}</h3>
            <p class="resource-description">{{ resource.description }}</p>

            <div class="resource-meta">
              <div *ngIf="resource.author" class="meta-item">
                <strong>Autor:</strong> {{ resource.author }}
              </div>
              <div *ngIf="resource.price" class="meta-item">
                <strong>Preis:</strong> {{ resource.price }}
              </div>
              <div class="meta-item">
                <strong>Sprache:</strong> {{ resource.language === 'de' ? 'Deutsch' : 'Englisch' }}
              </div>
            </div>
          </div>

          <div class="resource-actions">
            <button *ngIf="resource.url"
                    (click)="openResourceLink(resource)"
                    class="btn-primary">
              Öffnen
            </button>
            <button *ngIf="!resource.url"
                    (click)="openContactForm()"
                    class="btn-secondary">
              Mehr Infos
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Self-Care Section -->
  <section class="selfcare-section">
    <div class="container">
      <div class="selfcare-content">
        <h2>Vergiss nicht auf Dich selbst!</h2>
        <p class="selfcare-intro">Als Angehörige/r ist es wichtig, dass Du auch auf Dein eigenes Wohlbefinden achtest.</p>

        <div class="selfcare-tips">
          <div class="selfcare-tip">
            <h4>Grenzen setzen</h4>
            <p>Du kannst nicht alles lösen. Setze klare Grenzen und kommuniziere sie liebevoll aber bestimmt.</p>
          </div>

          <div class="selfcare-tip">
            <h4>Auszeiten nehmen</h4>
            <p>Plane regelmäßig Zeit nur für Dich ein. Das ist nicht egoistisch, sondern notwendig.</p>
          </div>

          <div class="selfcare-tip">
            <h4>Unterstützung holen</h4>
            <p>Scheue Dich nicht, selbst Hilfe zu suchen - bei Freunden, Familie oder professionell.</p>
          </div>

          <div class="selfcare-tip">
            <h4>Hobbys beibehalten</h4>
            <p>Behalte Deine eigenen Interessen und Aktivitäten bei. Sie sind wichtig für Dein Wohlbefinden.</p>
          </div>
        </div>

        <div class="selfcare-cta">
          <p><strong>Denke daran:</strong> Du hilfst am besten, wenn es Dir selbst gut geht!</p>
          <button (click)="openContactForm()" class="btn-primary">
            Persönliche Beratung anfragen
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact CTA -->
  <section class="contact-cta-section">
    <div class="container">
      <div class="cta-card">
        <h3>Brauchst Du persönliche Unterstützung?</h3>
        <p>Jede Situation ist anders. Gerne helfen wir Dir mit individuellen Tipps und vermitteln weitere Unterstützung.</p>
        <div class="cta-actions">
          <button (click)="openContactForm()" class="btn-primary">
            Beratung anfragen
          </button>
          <a href="mailto:kontakt@team-adhs.at?subject=Unterstützung für Angehörige" class="btn-secondary">
            E-Mail senden
          </a>
          <a routerLink="/termine" class="btn-outline">
            Partner-Treffen besuchen
          </a>
        </div>
      </div>
    </div>
  </section>
</div>
