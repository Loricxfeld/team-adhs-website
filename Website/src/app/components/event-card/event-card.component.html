<!-- src/app/components/event-card/event-card.component.html -->
<article class="event-card"
         [class.online]="event.isOnline"
         [class.soon]="isEventSoon()"
         [class.today]="isEventToday()">

  <!-- Event Status Indicators -->
  <div class="event-indicators" *ngIf="isEventToday() || isEventSoon()">
    <span class="indicator today" *ngIf="isEventToday()">Heute</span>
    <span class="indicator soon" *ngIf="isEventSoon() && !isEventToday()">Bald</span>
  </div>

  <!-- Event Header -->
  <header class="event-header">
    <div class="event-date">
      <time [attr.datetime]="event.date | date:'yyyy-MM-dd'">
        <span class="day">{{ event.date | date:'dd' }}</span>
        <span class="month">{{ event.date | date:'MMM' }}</span>
        <span class="year">{{ event.date | date:'yyyy' }}</span>
        <span class="weekday">{{ event.date | date:'EEEE' }}</span>
      </time>
    </div>

    <div class="event-type-badge" [class]="getEventTypeClass()">
      {{ event.type }}
    </div>
  </header>

  <!-- Event Content -->
  <div class="event-content">
    <h3 class="event-title">{{ event.title }}</h3>

    <!-- Event Details -->
    <div class="event-details">
      <div class="detail-item time">
        <mat-icon>schedule</mat-icon>
        <span>{{ event.date | date:'HH:mm' }} Uhr</span>
      </div>

      <div class="detail-item location" *ngIf="!event.isOnline">
        <mat-icon>place</mat-icon>
        <span>{{ event.location }}</span>
      </div>

      <div class="detail-item online" *ngIf="event.isOnline">
        <mat-icon>videocam</mat-icon>
        <span>Online via Zoom</span>
      </div>

      <div class="detail-item moderator" *ngIf="event.moderator">
        <mat-icon>person</mat-icon>
        <span>{{ event.moderator }}</span>
      </div>

      <div class="detail-item frequency" *ngIf="event.frequency && event.isRecurring">
        <mat-icon>event_repeat</mat-icon>
        <span>{{ event.frequency }}</span>
      </div>
    </div>

    <!-- Event Description -->
    <p class="event-description">{{ event.description }}</p>

    <!-- Registration Required Notice -->
    <div class="registration-notice" *ngIf="event.requiresRegistration">
      <mat-icon>info</mat-icon>
      <span>Anmeldung erforderlich unter kontakt@team-adhs.at</span>
    </div>
  </div>

  <!-- Event Actions -->
  <footer class="event-actions">
    <button class="btn btn-primary"
            *ngIf="event.requiresRegistration"
            (click)="onRegister()"
            [disabled]="isRegistering">
      <mat-icon *ngIf="!isRegistering">person_add</mat-icon>
      <mat-icon *ngIf="isRegistering" class="spinning">refresh</mat-icon>
      {{ isRegistering ? 'Wird angemeldet...' : 'Anmelden' }}
    </button>

    <a class="btn btn-secondary"
       *ngIf="event.isOnline && event.zoomLink"
       [href]="event.zoomLink"
       target="_blank"
       rel="noopener noreferrer">
      <mat-icon>launch</mat-icon>
      Zoom beitreten
    </a>

    <button class="btn btn-outline"
            (click)="addToCalendar()"
            title="Zum Kalender hinzufügen">
      <mat-icon>event</mat-icon>
      Kalender
    </button>

    <!-- Contact Email for Registration -->
    <a class="btn btn-outline"
       *ngIf="event.requiresRegistration"
       href="mailto:kontakt@team-adhs.at?subject=Anmeldung {{ event.title }}&body=Hallo,%0D%0A%0D%0AIch möchte mich für folgendes Event anmelden:%0D%0A{{ event.title }}%0D%0AAm {{ event.date | date:'dd.MM.yyyy' }} um {{ event.date | date:'HH:mm' }} Uhr%0D%0A%0D%0AVielen Dank!"
       title="Per E-Mail anmelden">
      <mat-icon>email</mat-icon>
      E-Mail
    </a>
  </footer>
</article>
